<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aquaponics Dashboard</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{
      --bg:#f8fafc;             /* light background */
      --card:#ffffff;           /* card surface */
      --card-border:#e5e7eb;    /* subtle border */
      --text:#0f172a;           /* main text */
      --muted:#64748b;          /* secondary text */

      /* series colors */
      --ph:#e11d48;       /* rose-600 */
      --ph-fill:#e11d4826;
      --tds:#0284c7;      /* sky-600 */
      --tds-fill:#0284c726;
      --temp:#d97706;     /* amber-600 */
      --temp-fill:#d9770626;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text); background:var(--bg); padding:24px;
    }
    header{display:flex; align-items:flex-start; gap:18px; flex-wrap:wrap; margin-bottom: 18px;}
    h1{margin:0; font-size:28px; letter-spacing:0.3px}
    .note{color:var(--muted); font-size:13px}
    .bar{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    .chip{
      padding:8px 12px; border-radius:999px; background:#ffffff; border:1px solid var(--card-border);
      font-size:13px; display:inline-flex; align-items:center; gap:8px;
      box-shadow:0 6px 18px rgba(2,6,23,.08);
    }
    .dot{width:10px; height:10px; border-radius:999px; display:inline-block}
    .dot.ph{background:var(--ph)} .dot.tds{background:var(--tds)} .dot.temp{background:var(--temp)}

    h2{margin:22px 0 10px; font-size:18px; color:#111827; letter-spacing:.3px}
    .grid{display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));}
    .card{
      background:var(--card); border:1px solid var(--card-border); border-radius:16px; padding:14px;
      box-shadow:0 10px 30px rgba(2,6,23,.06);
      min-height:320px; display:flex; flex-direction:column; justify-content:space-between;
    }
    .card h3{margin:0 0 10px; font-size:14px; color:#1f2937; font-weight:600}

    /* FIX: give charts a stable box; canvas fills it */
    .chartbox{ position:relative; height:260px; width:100%; }
    canvas{ display:block; width:100%; height:100%; }

    footer{margin-top:26px; color:var(--muted); font-size:12px}
    a{color:#0369a1}
    .err{color:#b91c1c}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Aquaponics Sensor Dashboard</h1>
      <div class="note">Live from <code>data.json</code> • Last refresh: <span id="ts"></span> • Auto refresh every 30 min</div>
    </div>
    <div class="bar" id="latestChips" aria-live="polite"></div>
  </header>

  <h2>Last 7 Days — Raw Readings</h2>
  <div class="grid">
    <div class="card"><h3>pH (raw)</h3><di
